<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>app/App.js - Documentation</title>

    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="https://code.ionicframework.com/ionicons/2.0.1/css/ionicons.min.css">
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    <li class="nav-link nav-home-link"><a href="index.html">Home</a></li><li class="nav-heading">Classes</li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="global.html#Adaptor">Adaptor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Adaptor#run">run</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ApolloLink.html">ApolloLink</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ApolloLink.html#mutate">mutate</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ApolloLink.html#query">query</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ApolloLink.html#run">run</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="global.html#App">App</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#App#getAdaptor">getAdaptor</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#App#getAuthenticationToken">getAuthenticationToken</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#App#getConfiguration">getConfiguration</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#App#setApolloEndpoint">setApolloEndpoint</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#App#setAuthenticationToken">setAuthenticationToken</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#App#setImageDistributionEndpoint">setImageDistributionEndpoint</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#App#setImageEndpoint">setImageEndpoint</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#App#setValidationEndpoint">setValidationEndpoint</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#App#setVerificationEndpoint">setVerificationEndpoint</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="Controller.html">Controller</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="Controller.html#.getInstance">getInstance</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="global.html#HttpLink">HttpLink</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#HttpLink#delete">delete</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#HttpLink#get">get</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#HttpLink#post">post</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#HttpLink#put">put</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#HttpLink#run">run</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="global.html#Link">Link</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Link#run">run</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="global.html#Model">Model</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Model#addObserver">addObserver</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Model#destroy">destroy</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Model#insert">insert</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Model#notifyObservers">notifyObservers</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Model#removeObserver">removeObserver</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ModelFactory.html">ModelFactory</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="ModelObserver.html">ModelObserver</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ModelObserver.html#addModel">addModel</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="ModelObserver.html#removeModel">removeModel</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="global.html#Observer">Observer</a></span></li><li class="nav-item"><span class="nav-item-type type-function">F</span><span class="nav-item-name"><a href="global.html#Observer#notify">notify</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="global.html#SynchronousLink">SynchronousLink</a></span></li><li class="nav-heading"><span class="nav-item-type type-class">C</span><span class="nav-item-name"><a href="global.html#User">User</a></span></li><li class="nav-heading"><a href="global.html">Globals</a></li>
</nav>

<div id="main">
    
    <h1 class="page-title">app/App.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// const CategoryController = require('./controllers/CategoryController');
// const CustomerController = require('./controllers/CustomerController');
// const CustomerTokenController = require('./controllers/CustomerTokenController');
// const CouponController = require('./controllers/CouponController');
// const EmployeeController = require('./controllers/EmployeeController');
// const EmployeeTokenController = require('./controllers/EmployeeTokenController');
// const GraphController = require('./controllers/GraphController');
// const HeadOfficeController = require('./controllers/HeadOfficeController');
// const MenuItemController = require('./controllers/MenuItemController');
// const ModifierController = require('./controllers/ModifierController');
// const VendorController = require('./controllers/VendorController');
// const VerificationController = require('./controllers/VerificationController');
// const ValidationController = require('./controllers/ValidationController');
// const OrderController = require('./controllers/OrderController');
// const ImageController = require('./controllers/ImageController');
// const strToIdentifier =  require('./util/strToIdentifier');
//
// const CheaprEatsApolloAdaptor = require('./adaptors/CheaprEatsApolloAdaptor');
//
// let config = {
//     endpoints: require('../config/endpoints')
// };

/**
 * Main entry point of the SDK
 */
class App {

    /**
     * Construct the App instance.
     */
    constructor() {
        this._token = null;

        this._adaptor = new CheaprEatsApolloAdaptor({
            apolloEndpoint: this.getConfiguration().endpoints.apolloEndpoint.production
        });

        this._categoryController = new CategoryController(this);
        this._customerController = new CustomerController(this);
        this._customerTokenController = new CustomerTokenController(this);
        this._couponController = new CouponController(this);
        this._employeeController = new EmployeeController(this);
        this._employeeTokenController = new EmployeeTokenController(this);
        this._graphController = new GraphController(this);
        this._headOfficeController = new HeadOfficeController(this);
        this._menuItemController = new MenuItemController(this);
        this._modifierController = new ModifierController(this);
        this._vendorController = new VendorController(this);
        this._verificationController = new VerificationController(this);
        this._validationController = new ValidationController(this);
        this._orderController = new OrderController(this);
        this._imageController = new ImageController(this);

        this.Category = {
            create: this._categoryController.create,
            delete: this._categoryController.delete,
            update: this._categoryController.update
        };

        this.Customer = {
            create: this._customerController.create,
            enrollApnsToken: this._customerController.enrollApnsToken,
            revokeApnsToken: this._customerController.revokeApnsToken,
            enrollFcmToken: this._customerController.enrollFcmToken,
            revokeFcmToken: this._customerController.revokeFcmToken,
            update: this._customerController.update,
            updateCreditCard: this._customerController.updateCreditCard,
            createWallet: this._customerController.createWallet,
            reloadWallet: this._customerController.reloadWallet,
            resetPassword: this._customerController.resetPassword,
            sendPasswordResetCode: this._customerController.sendPasswordResetCode
        };

        this.CustomerToken = {
            create: this._customerTokenController.create
        };

        this.Coupon = {
            create: this._couponController.create
        };

        this.Employee = {
            create: this._employeeController.create,
            update: this._employeeController.update,
            delete: this._employeeController.delete,
            enrollTerminalFcm: this._employeeController.enrollTerminalFcm,
            revokeTerminalFcm: this._employeeController.revokeTerminalFcm
        };

        this.EmployeeToken = {
            create: this._employeeTokenController.create
        };

        this.Graph = {
            query: this._graphController.query
        };

        this.MenuItem = {
            create: this._menuItemController.create,
            update: this._menuItemController.update,
            delete: this._menuItemController.delete
        };

        this.Modifier = {
            create: this._modifierController.create,
            update: this._modifierController.update,
            delete: this._modifierController.delete
        };

        this.Order = {
            create: this._orderController.create,
            cancel: this._orderController.cancel,
            beginPreparing: this._orderController.beginPreparing,
            prepared: this._orderController.prepared,
            complete: this._orderController.complete
        };

        this.HeadOffice = {
            create: this._headOfficeController.create,
            update: this._headOfficeController.update,
            delete: this._headOfficeController.delete
        };

        this.Vendor = {
            create: this._vendorController.create,
            createWithEmployee: this._vendorController.createWithEmployee,
            update: this._vendorController.update
        };

        this.Verification = {
            sendSms: this._verificationController.sendSms,
            checkSms: this._verificationController.checkSms
        };

        this.Validation = {
            Customer: {
                signupEmail: this._validationController.customerSignupEmail,
                signupPhone: this._validationController.customerSignupPhone
            }
        };

        this.Image = {
            upload: this._imageController.upload,
            getLink: this._imageController.getLink
        };

        this.Util = {
            strToIdentifier: strToIdentifier
        };

    }

    /**
     * Get current network adaptor instance
     * @returns {CheaprEatsApolloAdaptor}
     */
    getAdaptor() {
        return this._adaptor;
    }

    /**
     * Get Configuration
     * @returns {{endpoints: ({apolloEndpoint: {production: string}, verificationEndpoint: {production: string}, validationEndpoint: {production: string}, imageEndpoint: {production: string, distribution: string}}|{apolloEndpoint, verificationEndpoint, validationEndpoint, imageEndpoint})}}
     */
    getConfiguration() {
        return config;
    }

    /**
     * Set current authentication token
     * @param token
     */
    setAuthenticationToken(token) {
        this._token = token;
        this._adaptor.setAuthenticationToken(token);
    }

    /**
     * Get current authentication token
     * @returns {null|string}
     */
    getAuthenticationToken() {
        return this._token;
    }

    /**
     * Set apolloEndpoint.production
     * @param endpoint
     */
    setApolloEndpoint(endpoint) {
        config.endpoints.apolloEndpoint.production = endpoint;
        this._adaptor = new CheaprEatsApolloAdaptor({
            apolloEndpoint: this.getConfiguration().endpoints.apolloEndpoint.production
        });
    }

    /**
     * Set verificationEndpoint.production
     * @param endpoint
     */
    setVerificationEndpoint(endpoint) {
        config.endpoints.verificationEndpoint.production = endpoint;
    }

    /**
     * Set validationEndpoint.production
     * @param endpoint
     */
    setValidationEndpoint(endpoint) {
        config.endpoints.validationEndpoint.production = endpoint;
    }

    /**
     * Set imageEndpoint.production
     * @param endpoint
     */
    setImageEndpoint(endpoint) {
        config.endpoints.imageEndpoint.production = endpoint;
    }

    /**
     * Set imageEndpoint.distribution
     * @param endpoint
     */
    setImageDistributionEndpoint(endpoint) {
        config.endpoints.imageEndpoint.distribution = endpoint;
    }


}

module.exports = App;
</code></pre>
        </article>
    </section>




</div>

<br class="clear">

<footer>
    Generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Jan 08 2019 15:48:57 GMT-0500 (Eastern Standard Time) using the Minami theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>
</body>
</html>
